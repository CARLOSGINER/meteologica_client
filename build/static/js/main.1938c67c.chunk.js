(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{32:function(e,t,c){},33:function(e,t,c){},44:function(e,t,c){"use strict";c.r(t);var n=c(3),o=c.n(n),r=c(21),i=c.n(r),s=(c(32),c(14)),a=(c(33),c(27)),l=c(25),j=c.n(l),d=c(26),u=c.n(d),b=c(0),p=u()(j.a),h="#111d2b";function m(e){var t=e.getLastTemp,c=e.getLastPower,o=Object(n.useState)([]),r=Object(s.a)(o,2),i=r[0],l=r[1],j=Object(n.useState)([]),d=Object(s.a)(j,2),u=d[0],m=d[1],f=Object(n.useState)(!1),O=Object(s.a)(f,2),g=O[0],x=O[1],v=function(e){return[e.map((function(e){return e.time})),e.map((function(e){return e.value}))]},w=v(i)[0],y=v(i)[1].map((function(e){return e-273.15})),k=v(u)[1].map((function(e){return 1e3*e})),N="undefined"===typeof y[y.length-1]?0:y[y.length-1],T="undefined"===typeof k[k.length-1]?0:k[k.length-1];Object(n.useEffect)((function(){var e=Object(a.a)("https://meteologica-app-server.herokuapp.com");return e.on("connect",(function(){console.log("Socket connected: ",e.connected)})),e.on("sendingData",(function(e){l(e.updatedTemperatures),m(e.updatedPowers),x(!0)})),e.on("disconnect",(function(){x(!1)})),function(){return e.disconnect()}}),[]),Object(n.useEffect)((function(){t(N.toFixed(2)),c(T.toFixed(2))}),[N,T,t,c]);var P={range:[w.length-120,w.length],title:"Time",titlefont:{color:"white"},tickfont:{color:"white"},tickmode:"linear",dtick:12},S={range:[N-.2,N+.9],title:"Temp (C\xb0)",titlefont:{color:"white"},tickfont:{color:"white"}},_={range:[w.length-120,w.length],title:"Time",titlefont:{color:"white"},tickfont:{color:"white"},tickmode:"linear",dtick:12},C={range:[T-500,T+1e3],title:"Power (KW)",titlefont:{color:"white"},tickfont:{color:"white"}};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:g?"loader active":"loader",children:g?Object(b.jsx)("p",{children:"Connected! receiving data"}):Object(b.jsx)("p",{children:"Disconnected..."})}),Object(b.jsxs)("div",{className:"charts",children:[Object(b.jsx)(p,{data:[{type:"scatter",mode:"lines",x:w,y:y}],layout:{title:"Temperature",font:{color:"rgb(179, 179, 179)"},xaxis:P,yaxis:S,paper_bgcolor:h,plot_bgcolor:h}}),Object(b.jsx)(p,{data:[{type:"scatter",mode:"lines",x:w,y:k}],layout:{title:"Power",font:{color:"rgb(179, 179, 179)"},xaxis:_,yaxis:C,paper_bgcolor:h,plot_bgcolor:h}})]})]})}function f(e){var t=e.lastTemp,c=e.lastPower;return Object(b.jsxs)("div",{className:"widget",children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{className:"subtitle",children:"Temperature"}),Object(b.jsxs)("p",{className:"number",children:[t," \xb0C"]})]}),Object(b.jsx)("div",{className:"divider",children:"|"}),Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{className:"subtitle",children:"Power"}),Object(b.jsxs)("p",{className:"number",children:[c," KW"]})]})]})}function O(e){var t=e.lastTemp,c=e.lastPower;return Object(b.jsxs)("nav",{className:"header",children:[Object(b.jsx)("img",{className:"logo_img",src:"/assets/meteologica_logo.jpg",alt:"logo"}),Object(b.jsx)(f,{lastTemp:t,lastPower:c})]})}function g(){return Object(b.jsx)("footer",{children:Object(b.jsx)("p",{className:"copyright",children:"Develope by Carlos Giner \xa9 copyright 2021"})})}var x=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),c=t[0],o=t[1],r=Object(n.useState)(!1),i=Object(s.a)(r,2),a=i[0],l=i[1];return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(O,{lastTemp:c,lastPower:a}),Object(b.jsx)(m,{getLastTemp:function(e){o(e)},getLastPower:function(e){l(e)}}),Object(b.jsx)(g,{})]})};i.a.render(Object(b.jsx)(o.a.StrictMode,{children:Object(b.jsx)(x,{})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.1938c67c.chunk.js.map